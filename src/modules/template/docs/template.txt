===============================================================================
#    ##....##..#######..########.########.##....##
#    ##...##..##.....##......##..##.......###...##
#    ##..##...##.....##.....##...##.......####..##
#    #####....##.....##....##....######...##.##.##
#    ##..##...##.....##...##.....##.......##..####
#    ##...##..##.....##..##......##.......##...###
#    ##....##..#######..########.########.##....##
#
#    Kozen Engine - Task Execution Framework
...............................................................................
TOOL: Template Manager
===============================================================================

Description:
    Manage infrastructure templates and deployment configurations through multiple
    storage backends including file system and MongoDB. Provides centralized template
    storage with versioning, metadata management, and cross-platform compatibility.

Usage:
    kozen --action=template:<action> --name=<template> [options]
    kozen --controller=template --action=<action> --name=<template> [options]

Core Options:
    --stack=<id>                    Environment identifier (dev, test, staging, prod)
                                    (default: from NODE_ENV or 'dev')
    --project=<id>                  Project identifier for template organization
                                    (default: auto-generated timestamp ID)
    --config=<file>                 Configuration file path containing template manager settings
                                    (default: cfg/config.json)
    --controller=template           Explicitly set controller to template
    --action=<[controller:]action>  Template management operation to perform:

Available Actions:
    set                             Store a new template or update existing one
                                    - Serializes template content automatically
                                    - Supports multiple backend providers
                                    - Requires --name and (--content or --file) parameters
    
    get                             Retrieve and display a stored template
                                    - Automatically deserializes template content
                                    - Returns null if template not found
                                    - Requires --name parameter
    
    delete                          Remove a template from storage backend
                                    - Permanently deletes template data
                                    - Cannot be undone once executed
                                    - Requires --name parameter
    
    list                            Display available templates from storage
                                    - Shows all template names in storage
                                    - Supports different output formats (table, json)
                                    - Useful for template discovery and management
    
    metadata                        Display template manager configuration
                                    - Shows current backend provider details
                                    - Displays storage settings
                                    - Useful for troubleshooting

Template Management Options:
    --name=<identifier>             Template name/identifier (REQUIRED for most actions)
                                    Examples: atlas.basic, k8s.standard, custom.template
    --content=<json>                Template content as JSON string (REQUIRED for 'save' action)
                                    Can contain complete template definitions
    --file=<path>                   File path to read template content from (alternative to --content)
                                    Supports JSON template files
    --format=<type>                 Output format for template display (json, yaml, table)
                                    (default: json for get/metadata, table for list)
    --storage=<type>                Storage backend override (File, MDB)
                                    Temporarily override configured storage backend

Environment Variables:
    KOZEN_CONFIG                    Default value assigned to the --config property
    KOZEN_ACTION                    Default value assigned to the --action property
    KOZEN_STACK                     Default value assigned to the --stack property
    KOZEN_PROJECT                   Default value assigned to the --project property
    KOZEN_TM_NAME                   Default value assigned to the --name property
    KOZEN_TM_CONTENT                Default value assigned to the --content property
    KOZEN_TM_FILE                   Default value assigned to the --file property
    KOZEN_TM_FORMAT                 Default value assigned to the --format property

Storage Backends:
    File System                     Local/network file storage with JSON serialization
    MongoDB                         Document-based storage with metadata and versioning
    
Template Features:
    - Automatic serialization/deserialization
    - Multiple backend provider support
    - Environment-based template organization
    - Metadata enrichment (timestamps, versioning)
    - Audit logging for all operations

Examples:
    # Save a template from JSON content
    kozen --action=template:save --name=atlas.basic --content='{"name":"atlas.basic","components":[...]}'
    
    # Save a template from file
    kozen --action=template:save --name=k8s.standard --file=./templates/k8s-standard.json
    
    # Retrieve a template
    kozen --action=template:get --name=atlas.basic
    
    # Retrieve with specific format
    kozen --action=template:get --name=atlas.basic --format=json
    
    # Delete a template permanently
    kozen --action=template:delete --name=atlas.basic
    
    # List available templates in table format
    kozen --action=template:list --format=table
    
    # List available templates in JSON format
    kozen --action=template:list --format=json
    
    # Alternative syntax with explicit controller
    kozen --controller=template --action=get --name=demo.template
    
    # Get template manager configuration details
    kozen --action=template:metadata
    
    # Save template with environment separation
    kozen --action=template:save --name=prod.atlas --file=./prod-atlas.json --stack=production
    
    # Delete template with explicit controller syntax
    kozen --controller=template --action=delete --name=old.template
    
    # Using environment variables for convenience
    export KOZEN_TM_NAME=my.template
    export KOZEN_TM_FILE=./my-template.json
    kozen --action=template:save
===============================================================================